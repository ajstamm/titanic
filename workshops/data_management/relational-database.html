---
layout: presentation
title: "Relational Database Intro"
---

<section>
    <h2>Relational Database Intro</h2>
    <div class="left">
        <p>Duration: ~60 Minutes</p>
        <p>5 Minute Break</p>
    </div>
    <div class="right">
        <div class="center" style="text-align:center;">
            <img src="https://mir-s3-cdn-cf.behance.net/project_modules/disp/b41fff31126373.56424229bf48e.jpg" 
                 width="50%" alt="Clock made of Legos">
        </div>
    </div>
</section>

<section>
    <h2>Learning Objectives</h2>
    <ul>
        <li>Define relational database</li>
        <li>Identify basic structure of relational databases</li>
        <li>Merge two databases using a key</li>
        <li>Append rows to a dataset</li>
        <!-- <li>Gather, spread, and transpose datasets</li> -->
        <!-- <li>Read and save CSV files</li> -->
    </ul>
    <aside class="notes">
	  </aside>
</section>

<section>
    <h2>What you will not learn</h2>
    <ul>
        <li>How to build relational databases</li>
        <li>Why to use relational databases</li>
        <li>Query language such as SQL</li>
    </ul>
</section>

<section>
    <h2>Relational database definition</h2>
    <p>Collection of datasets that are combined using keys.
       This structure reduces the need for duplication.</p>
</section>

<section>
    <h2>Relational database structure</h2>
    
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; float: left; margin-right: 10px; font-size:75%;"
           border="1">
        <caption>Pet-level data</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">3</td>
            </tr>
            <tr>
                <td style="text-align:center;">Tea</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">1</td>
            </tr>
            <tr>
                <td style="text-align:center;">Urn</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">1</td>
            </tr>
        </tbody>
    </table>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-right: 0; margin-left: auto; font-size:75%;"
           border="1">
        <caption>Child-level data</caption>
        <thead>
            <tr>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>
</section>

<section>
    <h2>Merged dataset structure</h2>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-left: auto; margin-right: auto; font-size:75%;"
           border="1">
        <caption>Child and pet-level data</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
            <tr>
                <td style="text-align:center;">Tea</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">Urn</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
        </tbody>
    </table>
    
    <aside class="notes">
You may need to rename or select variables pre-emptively to avoid confusion. 
I will not cover these in detail today, but you should know they are possible.
	  </aside>
</section>


<section>
    <h2>Code for merging datasets</h2>
    
    <p>These functions merge on a key.</p>
    
    <ul>
        <li>left_join()</li>
        <li>right_join()</li>
        <li>full_join()</li>
        <li>inner_join()</li>
    </ul>
</section>

<section>
    <h2>Left joining</h2>
    
    <table class="table table-striped table-hover table-condensed table-responsive" 
       style="width: auto !important; float: left; margin-right: 10px; font-size:75%;"
       border="1">
        <caption>Pets</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">4</td>
            </tr>
        </tbody>
    </table>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-right: 0; margin-left: auto; font-size:75%;"
           border="1">
        <caption>Children</caption>
        <thead>
            <tr>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>

<pre><code class="r">
leftjoin <- pet %>% left_join(child, by = "child_key")
</code></pre>
    <table class="table table-striped table-hover table-condensed table-responsive" 
       style="width: auto !important; margin-left: auto; margin-right: auto; font-size:75%;"
       border="1">
        <caption>Left joined table</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">4</td>
                <td style="text-align:center;">NA</td>
                <td style="text-align:center;">NA</td>
            </tr>
        </tbody>
    </table>
</section>

<section>
    <h2>Right joining</h2>
    
    <table class="table table-striped table-hover table-condensed table-responsive" 
       style="width: auto !important; float: left; margin-right: 10px; font-size:75%;"
       border="1">
        <caption>Pets</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">4</td>
            </tr>
        </tbody>
    </table>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-right: 0; margin-left: auto; font-size:75%;"
           border="1">
        <caption>Children</caption>
        <thead>
            <tr>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>

<pre><code class="r">
rightjoin <- pet %>% right_join(child, by = "child_key")
</code></pre>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-left: auto; margin-right: auto; font-size:75%;"
           border="1">
        <caption>Right joined table</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">NA</td>
                <td style="text-align:center;">NA</td>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>
</section>

<section>
    <h2>Full joining</h2>
    
    <table class="table table-striped table-hover table-condensed table-responsive" 
       style="width: auto !important; float: left; margin-right: 10px; font-size:75%;"
       border="1">
        <caption>Pets</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">4</td>
            </tr>
        </tbody>
    </table>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-right: 0; margin-left: auto; font-size:75%;"
           border="1">
        <caption>Children</caption>
        <thead>
            <tr>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>

<pre><code class="r">
fulljoin <- pet %>% full_join(child, by = "child_key")
</code></pre>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-left: auto; margin-right: auto; font-size:75%;"
           border="1">
        <caption>Fully joined table</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">4</td>
                <td style="text-align:center;">NA</td>
                <td style="text-align:center;">NA</td>
            </tr>
            <tr>
                <td style="text-align:center;">NA</td>
                <td style="text-align:center;">NA</td>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
        </tbody>
    </table>
</section>

<section>
    <h2>Inner joining</h2>
    
    <table class="table table-striped table-hover table-condensed table-responsive" 
       style="width: auto !important; float: left; margin-right: 10px; font-size:75%;"
       border="1">
        <caption>Pets</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
            </tr>
            <tr>
                <td style="text-align:center;">Sam</td>
                <td style="text-align:center;">dog</td>
                <td style="text-align:center;">4</td>
            </tr>
        </tbody>
    </table>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-right: 0; margin-left: auto; font-size:75%;"
           border="1">
        <caption>Children</caption>
        <thead>
            <tr>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">1</td>
                <td style="text-align:center;">Amy</td>
                <td style="text-align:center;">8</td>
            </tr>
            <tr>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>

<pre><code class="r">
innerjoin <- pet %>% inner_join(child, by = "child_key")
</code></pre>
    <table class="table table-striped table-hover table-condensed table-responsive" 
           style="width: auto !important; margin-left: auto; margin-right: auto; font-size:75%;"
           border="1">
        <caption>Inner joined table</caption>
        <thead>
            <tr>
                <th style="text-align:center;">pet_name</th>
                <th style="text-align:center;">pet_type</th>
                <th style="text-align:center;">child_key</th>
                <th style="text-align:center;">child_name</th>
                <th style="text-align:center;">child_age</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Qua</td>
                <td style="text-align:center;">cat</td>
                <td style="text-align:center;">2</td>
                <td style="text-align:center;">Ben</td>
                <td style="text-align:center;">10</td>
            </tr>
            <tr>
                <td style="text-align:center;">Ray</td>
                <td style="text-align:center;">iguana</td>
                <td style="text-align:center;">3</td>
                <td style="text-align:center;">Cam</td>
                <td style="text-align:center;">7</td>
            </tr>
        </tbody>
    </table>
</section>

<section>
    <h2></h2>

    <div class="left">
    </div>
    <div class="right">
    </div>
</section>

<section>
    <h2>Your Turn!</h2>
    
    <pre><code class="r">
    </code></pre>
    
    <p style="color:red"></p>
</section>

<section>
    <h2></h2>
    
    <pre><code class="r">
    </code></pre>
</section>

<section>
    <h2></h2>
    
    <p style="color:red"></p>
    
    <div class="left">
        <h5>Base R</h5>
        <pre><code class="r">
        </code></pre>
        <pre><code class="fragment r">
        </code></pre>        
    </div>
    <div class="right">
        <h5>dplyr</h5>
        <pre><code class="r">
        </code></pre>
        <pre><code class="fragment r">  
        </code></pre>        
    </div>    
</section>

<section>
</section>




<section>
    <h1>And Now You Know!</h1>
    <img src="http://3.bp.blogspot.com/-3neBa4Df2jg/VKDESZ4svdI/AAAAAAAAGYQ/ulXSX172Pts/s1600/jangbricks-q-a.jpg" alt="Q & A" width="30%">
</section>
