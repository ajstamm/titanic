---
layout: presentation
title: "Special variable types"
---

<section>
  <h2>Special variable types</h2>
  <p>May 2020</p>
  <small><p>This presentation was tailored to meet the needs of the 
            Office of Primary Care and Health Systems Management 
            and does not cover all aspects of dates and factors.</p></small>
</section>

<section>
  <h2>Learning Objectives</h2>
  <ul>
      <li>Create and label factors</li>
      <li>Define and manipulate dates</li>
  </ul>
</section>

<section>
  <h2>Factors</h2>
  <p>Factors are categorical variables that contain number values and string labels. To illustrate how this works, run this code:</p>
  <pre><code class="r">
passengers <- data.frame(name = c("Amy", "Ben", "Dan", "Eli", "Flo"),
                         class = c(1,3,2,2,3), stringsAsFactors = FALSE)
passengers$class_label <- factor(passengers$class, levels = 1:3, 
                                 labels = c("first", "second", "third"),
                                 ordered=TRUE)
  </code></pre>
</section>

<section>
  <h2>Exploring factors</h2>
  <p>To see the difference between class and class_label, run:</p>
  <pre><code class="r">
summary(passengers)
str(passengers)
levels(passengers$name)
levels(passengers$class_label)
as.numeric(passengers$name)
as.numeric(passengers$class_label)

  </code></pre>
</section>

<section>
  <h2>Manipulating factors</h2>
  <p>Refer to factors by their labels.</p>
  <pre><code class="r">
passengers %>% filter(class_label == "second")

  </code></pre>
  <p>If you need to manipulate the indices directly, use 
     <code>as.numeric()</code>.</p>
  <pre><code class="r">
mean(as.numeric(passengers$class_label))

  </code></pre>
</section>


<section>
  <h2>Dates</h2>
  <p>Dates are not fun. If you work a lot with dates, 
     try the <code>lubridate</code> package.<br />
     Here, we will use base R.</p>
  <pre><code class="r">
dates <- c("10-01-2010", "01/10/10", "Oct 1, 2010")
  </code></pre>
</section>

<section>
  <h2>Exploring dates</h2>
  <p>Usually, you read in dates as strings and need to convert them.</p>
  <p>Then you define their format. With luck, they are all formatted 
     the same way.</p>
  <pre><code class="r">
dates <- c("10-01-2010", "01/10/10", "Oct 1, 2010")
as.Date(dates)

  </code></pre>
  <p>Were any dates displayed correctly?</p>
</section>

<section>
  <h2>Manipulating dates</h2>
  <p>To see more possible codes for dates, click 
     <a href="https://www.r-bloggers.com/date-formats-in-r/">here</a>.</p>
  <pre><code class="r">
as.Date("2010-10-01") # R default order: year, month, date
months(as.Date("2010-10-01")) # we want to switch month and date
as.Date("2010-10-01", format = "%Y-%d-%m")

  </code></pre>
  <p>What if my date has the standard slashes?</p>
  <pre><code class="r">
as.Date("10/01/2010", format = "%m/%d/%Y") 

  </code></pre>
</section>

<section>
  <h2>Extracting weekdays</h2>
  <p>Sometimes, you need to know if an event occurred on a weekend or 
     in the first quarter of the year.</p>
  <pre><code class="r">
x <- as.Date("2010-10-01", format = "%Y-%d-%m")
weekdays(x)
months(x)
quarters(x)
  </code></pre>
</section>

<section>
  <h2>Questions?</h2>
  <img src="http://3.bp.blogspot.com/-3neBa4Df2jg/VKDESZ4svdI/AAAAAAAAGYQ/ulXSX172Pts/s1600/jangbricks-q-a.jpg" alt="Q & A" width="30%">
</section>

